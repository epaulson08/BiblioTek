<div class="container-fluid">
  <!-- SEE ALL ARTICLES -->
  <h4 *ngIf="!selected">All Articles:</h4>
  <table *ngIf="!selected" class="table table-hover">
    <thead class="thead-light">
      <tr>
        <th></th>
        <th>Title</th>
        <th>Author(s)</th>
        <th>Journal</th>
        <th>Vol</th>
        <th>Year</th>
        <th>DOI</th>
      </tr>
    </thead>
    <tbody>
      <!-- Row Displaying Article Entity -->
      <tr *ngFor="let ja of journalArticles">
        <td>
          <button (click)="setSelected(ja)" class="btn btn-warning">
            Examine
          </button>
        </td>

        <!-- Title -->
        <td style="min-width: 250px">{{ ja.title }}</td>

        <!-- Author(s) -->
        <td>
          {{ ja.authors | authorFormat }}
        </td>

        <!-- Journal Name -->
        <td>{{ ja.journal.name }}</td>

        <!-- Volume -->
        <td>{{ ja.volumeNum }}</td>

        <!-- Year -->
        <td>{{ ja.yearPublished }}</td>

        <!-- DOI -->
        <td style="max-width: 150px; word-wrap: 'break-word;'">
          {{ ja.doi }}
        </td>
      </tr>
    </tbody>
  </table>

  <!-- DETAIL ARTICLE VIEW -->
  <div *ngIf="selected">
    <div class="card mb-3">
      <div class="card-body">
        <div *ngIf="!deleted">
          <table class="m-3">
            <tr>
              <th scope="row">Title:</th>
              <td *ngIf="selected !== editJa">{{ selected.title }}</td>
              <td *ngIf="selected === editJa">
                <textarea
                  class="form-control"
                  rows="5"
                  name="fred"
                  [(ngModel)]="editJa.title"
                ></textarea>
              </td>
            </tr>
            <tr>
              <th scope="row">Authors:</th>
              <td>
                {{ selected.authors | authorFormat }}
              </td>
              <!-- TODO: allow editing of authors -->
            </tr>
            <tr>
              <th scope="row">Journal:</th>
              <td *ngIf="selected !== editJa">{{ selected.journal.name }}</td>

              <td *ngIf="selected === editJa">
                <select
                  class="form-control"
                  [(ngModel)]="editJournal"
                  name="editJournal"
                >
                  <option [ngValue]="editJournal" selected>
                    {{ editJournal.name }}
                  </option>
                  <option *ngFor="let j of allJournals" [ngValue]="j">
                    {{ j.name }}
                  </option>
                </select>
              </td>
            </tr>

            <!-- Volume -->
            <tr>
              <th scope="row">Volume:</th>
              <td *ngIf="selected !== editJa">{{ selected.volumeNum }}</td>
              <td *ngIf="selected === editJa">
                <input
                  type="text"
                  class="form-control"
                  name="editVol"
                  [(ngModel)]="editJa.volumeNum"
                />
              </td>
            </tr>

            <!-- Year -->
            <tr>
              <th scope="row">Year:</th>
              <td *ngIf="selected !== editJa">{{ selected.yearPublished }}</td>
              <td *ngIf="selected === editJa">
                <input
                  type="text"
                  class="form-control"
                  name="editVol"
                  [(ngModel)]="editJa.yearPublished"
                />
              </td>
            </tr>

            <!-- DOI -->
            <tr>
              <th scope="row">DOI:</th>
              <td *ngIf="selected !== editJa">{{ selected.doi }}</td>
              <td
                *ngIf="selected === editJa"
                style="max-width: 150px; word-wrap: 'break-word;'"
              >
                <input
                  type="text"
                  class="form-control"
                  name="editDoi"
                  [(ngModel)]="editJa.doi"
                />
              </td>
            </tr>
          </table>
        </div>
        <div *ngIf="deleted"><h2>Deleted.</h2></div>
      </div>

      <!-- Buttons -->
      <div class="card-footer d-flex">
        <div *ngIf="!deleted && !editJa">
          <button class="btn btn-success mr-2" (click)="setEdit()">Edit</button>
          <button class="btn btn-warning mr-2">Cite</button>
          <button class="btn btn-info mr-2">Add to Collection</button>
          <button class="btn btn-secondary mr-2" (click)="clearSelected()">
            Back
          </button>
        </div>
        <div *ngIf="!deleted && editJa">
          <button class="btn btn-success mr-2" (click)="update(editJa)">
            Submit</button
          ><button class="btn btn-secondary mr-2" (click)="cancelEdit()">
            Cancel
          </button>
        </div>
        <div *ngIf="!deleted">
          <button class="btn btn-danger" (click)="delete(selected.id)">
            Delete
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

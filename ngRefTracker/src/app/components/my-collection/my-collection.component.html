<app-navi></app-navi>
<div class="container-fluid">
  <div class="row">
    <!-- Sidebar -->
    <div class="col-2 bg-palette-A3 d-none d-md-block sidebar">
      <app-sidebar></app-sidebar>
    </div>

    <!-- Main content -->
    <div class="col">
      <!-- Name and description -->
      <div class="row">
        <div class="col">
          <!-- Non-edit mode -->
          <span *ngIf="!this.editView">
            <h4 class="my-3 page-header">
              {{ coll.name }}
              <button
                class="float-right btn btn-custom-warning btn-sm"
                (click)="setExpandedView()"
              >
                Expanded View
              </button>
              <button
                class="float-right btn btn-custom-warning btn-sm mr-2"
                (click)="setListView()"
              >
                List View
              </button>
            </h4>
            <div class="row">
              <div class="col-8">
                <h5 class="mt-2 text-palette-A1">
                  {{ coll.description }}
                </h5>
              </div>
            </div>
            <h5>
              <button class="btn btn-custom-primary btn-sm mr-2">Cite All</button>
              <button
                class="btn btn-custom-secondary btn-sm mr-2"
                (click)="showEditView()"
              >
                Edit
              </button>
            </h5>
          </span>

          <!-- Edit mode -->
          <span *ngIf="this.editView">
            <h4>
              <input [(ngModel)]="this.editedMyCollection.name" class="col-6" />
            </h4>
            <h5>
              <textarea
                [(ngModel)]="this.editedMyCollection.description"
                class="col-6"
              ></textarea>
            </h5>
            <button
              class="btn btn-custom-success"
              (click)="this.updateMyCollection(this.editedMyCollection)"
            >
              Save Changes
            </button>
          </span>
        </div>
      </div>
      <!-- ^ Close row: header -->

      <div class="my-2"></div>

      <!-- Articles -->
      <div class="row">
        <div class="col">
          <!-- Expanded View -->
          <span *ngIf="this.expandedView">
            <div class="card-deck">
              <span *ngFor="let article of coll.articles" style="min-width:100%">
                <app-display-article
                  [articleId]="article.id"
                  [myCollectionView]="true"
                  [collId]="this.collId"
                ></app-display-article>
              </span>
            </div>
          </span>

          <!-- List View -->
          <div class="mt-3"></div>
          <span *ngIf="this.listView">
            <app-display-articles
              [articlesToDisplay]="coll.articles"
              [myCollectionView]="true"
            ></app-display-articles>
          </span>
        </div>
      </div>
    </div>
  </div>
</div>
